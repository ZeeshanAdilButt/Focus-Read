<!DOCTYPE html>
<html>
  <head>
    <title>Flow Mate</title>
    <link rel="stylesheet" href="sidepanel.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      
      <!-- Premium Header -->
      <div class="app-header">
          <div class="brand">
              <div class="brand-icon">
                  <svg viewBox="0 0 128 128" width="24" height="24">
                    <defs>
                      <linearGradient id="hdrGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff6b6b"/>
                        <stop offset="100%" style="stop-color:#ee5a24"/>
                      </linearGradient>
                    </defs>
                    <rect x="8" y="8" width="112" height="112" rx="24" fill="#1a1a2e"/>
                    <g stroke="url(#hdrGrad)" stroke-linecap="round" fill="none">
                      <line x1="28" y1="44" x2="100" y2="44" stroke-width="8" opacity="0.4"/>
                      <line x1="28" y1="64" x2="100" y2="64" stroke-width="10"/>
                      <line x1="28" y1="84" x2="100" y2="84" stroke-width="8" opacity="0.4"/>
                      <circle cx="44" cy="64" r="4" fill="#fff"/>
                    </g>
                  </svg>
              </div>
              <span class="brand-name">Flow Mate</span>
          </div>
          <div class="header-stats">
              <span class="stat"><span id="progressText">0%</span></span>
              <span class="stat-divider">â€¢</span>
              <span class="stat" id="timeRemaining">--:--</span>
          </div>
      </div>

      <!-- Progress Track -->
      <div class="progress-track">
          <input type="range" id="progressBar" value="0" min="0" max="100" step="1">
      </div>

      <!-- Main Reader Display -->
      <div class="reader-display" id="readerDisplay">
        <div class="focus-guides">
             <div class="guide-top"></div>
             <div class="guide-bottom"></div>
        </div>
        <div id="wordDisplay" class="word-display">
            <span class="placeholder">Ready to flow</span>
        </div>
      </div>

      <!-- Control Bar -->
      <div class="controls-container">
        
        <div class="main-controls">
            <button id="restartBtn" class="icon-btn" title="Restart"><i class="fas fa-undo"></i></button>
            <button id="prevBtn" class="icon-btn" title="Back 10s"><i class="fas fa-backward"></i></button>
            <button id="playPauseBtn" class="play-btn"><i class="fas fa-play"></i></button>
            <button id="nextBtn" class="icon-btn" title="Forward 10s"><i class="fas fa-forward"></i></button>
            <button id="fullscreenBtn" class="icon-btn" title="Fullscreen"><i class="fas fa-expand"></i></button>
            <button id="settingsBtn" class="icon-btn" title="Settings"><i class="fas fa-cog"></i></button>
        </div>

        <div class="secondary-controls">
             <div class="action-buttons">
                 <button id="scanPageBtn" class="action-btn" title="Read Page">
                     <i class="fas fa-file-alt"></i>
                 </button>
                 <button id="openPdfBtn" class="action-btn" title="Open PDF">
                     <i class="fas fa-file-pdf"></i>
                 </button>
                 <button id="setTextBtn" class="action-btn" title="Paste Text">
                     <i class="fas fa-paste"></i>
                 </button>
                 <button id="clearTextBtn" class="action-btn action-btn-danger" title="Clear">
                     <i class="fas fa-trash"></i>
                 </button>
             </div>
             <div class="wpm-control">
                <span>WPM:</span>
                <span id="wpmDisplay">300</span>
                <input type="range" id="wpmInput" value="300" min="60" max="1000" step="10">
             </div>
        </div>
      
      </div>

      <!-- Settings / Input Modal Overlay -->
      <div id="settingsOverlay" class="overlay hidden">
         <div class="overlay-content settings-content">
             <div class="overlay-header">
                 <h3>Settings</h3>
                 <button id="closeSettingsX" class="close-x-btn" title="Close (Esc)"><i class="fas fa-times"></i></button>
             </div>
             
             <!-- Toggles Row -->
             <div class="setting-row">
                 <button id="togglePausesBtn" class="toggle-btn active" data-active="true">Pauses: On</button>
                 <button id="toggleLoopBtn" class="toggle-btn" data-active="false">Loop: Off</button>
             </div>

             <!-- Sliders & Inputs -->
             <div class="setting-item">
                <label>Mode</label>
                <div class="setting-row">
                    <button id="modeWordBtn" class="toggle-btn active" data-mode="word">Word</button>
                    <button id="modeSentenceBtn" class="toggle-btn" data-mode="sentence">Sentence</button>
                </div>
             </div>

             <div class="setting-item" id="chunkSizeContainer">
                <label>Words at a time</label>
                <input type="number" id="chunkSizeInput" value="1" min="1" max="5">
             </div>

             <div class="setting-item">
                <label>Pause Scale</label>
                <div class="control-pair">
                    <input type="range" id="pauseScaleSlider" min="1" max="3" step="0.1" value="1.5">
                    <input type="number" id="pauseScaleInput" value="1.5" min="1" max="3" step="0.1">
                </div>
             </div>

             <!-- Navigation Settings -->
             <div class="setting-section-title">Navigation</div>
             
             <div class="setting-item">
                <label>Skip By</label>
                <select id="navModeSelect">
                    <option value="seconds">Seconds</option>
                    <option value="words">Words</option>
                    <option value="sentences">Sentences</option>
                    <option value="paragraphs">Paragraphs</option>
                </select>
             </div>
             
             <div class="setting-item" id="navAmountContainer">
                <label>Skip Amount</label>
                <input type="number" id="navAmountInput" value="10" min="1" max="60">
             </div>

             <div class="setting-item" id="sentenceLengthContainer" style="display:none;">
                <label>Sentence Preview</label>
                <span style="font-size: 0.8rem; color: #888;">Shows full sentence</span>
             </div>

             <div class="setting-item">
                <label>Font</label>
                <select id="fontSelect">
                    <option value="'Segoe UI', sans-serif">Segoe UI</option>
                    <option value="'Courier New', monospace">Courier</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                    <option value="'Verdana', sans-serif">Verdana</option>
                    <option value="'Montserrat', sans-serif">Montserrat</option>
                </select>
             </div>

             <div class="setting-item">
                <label>Font Scale</label>
                <div class="control-pair">
                    <input type="range" id="fontScaleSlider" min="0.5" max="3" step="0.1" value="1">
                    <input type="number" id="fontScaleInput" value="1" min="0.5" max="3" step="0.1">
                </div>
             </div>

             <!-- Colors -->
             <div class="setting-item color-item">
                <label>Screen</label>
                <div class="color-pair">
                    <input type="color" id="bgColorPicker" value="#000000">
                    <input type="text" id="bgColorText" value="#000000">
                </div>
             </div>
             
             <div class="setting-item color-item">
                <label>Text</label>
                <div class="color-pair">
                    <input type="color" id="textColorPicker" value="#ffffff">
                    <input type="text" id="textColorText" value="#ffffff">
                </div>
             </div>

             <div class="setting-item color-item">
                <label>Focus</label>
                <div class="color-pair">
                    <input type="color" id="focusColorPicker" value="#e74c3c">
                    <input type="text" id="focusColorText" value="#e74c3c">
                </div>
             </div>

             <div class="settings-actions">
                 <button id="resetSettingsBtn" class="secondary-btn">Reset</button>
                 <button id="closeSettingsBtn" class="primary-btn">Close</button>
             </div>
         </div>
      </div>

      <div id="manualInputOverlay" class="overlay hidden">
        <div class="overlay-content">
            <h3>Paste Text</h3>
            <textarea id="manualTextInput" placeholder="Paste your text here..."></textarea>
            <div class="overlay-actions">
                <button id="cancelInputBtn" class="secondary-btn">Cancel</button>
                <button id="loadInputBtn" class="primary-btn">Read</button>
            </div>
        </div>
     </div>

    </div>

    <!-- Toast notification -->
    <div id="toast" class="toast hidden">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Ready</span>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>
